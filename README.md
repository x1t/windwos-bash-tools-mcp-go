# ğŸš€ MCP Bash Tools

<div align="center">

![MCP Bash Tools](https://img.shields.io/badge/MCP-Bash%20Tools-blue?style=for-the-badge&logo=power-shell&logoColor=white)
![Security](https://img.shields.io/badge/Security-Enterprise%20Grade-brightgreen?style=for-the-badge&logo=shield-check&logoColor=white)
![Windows](https://img.shields.io/badge/Platform-Windows%20x64-0078D4?style=for-the-badge&logo=windows)

[![Go Version](https://img.shields.io/badge/Go-1.23.0+-00ADD8?style=flat-square&logo=go)](https://golang.org/)
[![License](https://img.shields.io/badge/License-MIT-green?style=flat-square)](LICENSE)
[![PowerShell](https://img.shields.io/badge/PowerShell-7.0+-5391FE?style=flat-square&logo=powershell)](https://docs.microsoft.com/powershell/)
[![Tests](https://img.shields.io/badge/Tests-Comprehensive-blue?style=flat-square&logo=checkmarx)]
[![Coverage](https://img.shields.io/badge/Coverage-80%25%2B-brightgreen?style=flat-square&logo=chart-area)]

**âœ¨ ä¼ä¸šçº§å®‰å…¨PowerShell/Bashå‘½ä»¤æ‰§è¡Œå·¥å…· âœ¨**

åŸºäº [Model Context Protocol (MCP)](https://modelcontextprotocol.io/) æ„å»ºçš„ç°ä»£åŒ–ä¼ä¸šçº§å‘½ä»¤æ‰§è¡Œè§£å†³æ–¹æ¡ˆï¼Œä¸“ä¸ºAIåº”ç”¨æä¾›å®‰å…¨ã€å¯é ã€é«˜æ€§èƒ½çš„Shellç¯å¢ƒè®¿é—®èƒ½åŠ›ã€‚

[ğŸš€ å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹) â€¢ [âœ¨ åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§) â€¢ [ğŸ—ï¸ æ¶æ„è®¾è®¡](#ï¸-æ¶æ„è®¾è®¡) â€¢ [ğŸ›¡ï¸ å®‰å…¨æœºåˆ¶](#ï¸-å®‰å…¨æœºåˆ¶) â€¢ [ğŸ“š å¼€å‘æ–‡æ¡£](CLAUDE.md) â€¢ [ğŸ§ª æµ‹è¯•æŒ‡å—](#-æµ‹è¯•) â€¢ [ğŸ¤ è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)

</div>

---

## ğŸ“‘ ç›®å½•

- [âœ¨ åŠŸèƒ½ç‰¹æ€§](#-åŠŸèƒ½ç‰¹æ€§)
- [ğŸš€ å¿«é€Ÿå¼€å§‹](#-å¿«é€Ÿå¼€å§‹)
- [ğŸ“¦ å®‰è£…è¦æ±‚](#-å®‰è£…è¦æ±‚)
- [ğŸ”Œ MCPå·¥å…·æ¥å£](#-mcpå·¥å…·æ¥å£)
- [ğŸ—ï¸ æ¶æ„è®¾è®¡](#ï¸-æ¶æ„è®¾è®¡)
- [ğŸ›¡ï¸ å®‰å…¨æœºåˆ¶](#ï¸-å®‰å…¨æœºåˆ¶)
- [ğŸ§ª æµ‹è¯•](#-æµ‹è¯•)
- [ğŸ‘¨â€ğŸ’» å¼€å‘æŒ‡å—](#-å¼€å‘æŒ‡å—)
- [ğŸ”§ æ„å»ºå’Œéƒ¨ç½²](#-æ„å»ºå’Œéƒ¨ç½²)
- [ğŸ“Š æ€§èƒ½æŒ‡æ ‡](#-æ€§èƒ½æŒ‡æ ‡)
- [ğŸ” æ•…éšœæ’é™¤](#-æ•…éšœæ’é™¤)
- [ğŸ“š è¯¦ç»†æ–‡æ¡£](#-è¯¦ç»†æ–‡æ¡£)
- [ğŸ¤ è´¡çŒ®æŒ‡å—](#-è´¡çŒ®æŒ‡å—)
- [ğŸ“„ è®¸å¯è¯](#-è®¸å¯è¯)

---

## âœ¨ åŠŸèƒ½ç‰¹æ€§

### ğŸ¯ æ ¸å¿ƒåŠŸèƒ½

| åŠŸèƒ½ç±»åˆ«                    | æè¿°                                             | çŠ¶æ€      |
| :-------------------------- | :----------------------------------------------- | :-------- |
| **ğŸ›¡ï¸ å®‰å…¨å‘½ä»¤æ‰§è¡Œ** | å¤šå±‚å®‰å…¨éªŒè¯ï¼Œ70+å±é™©æ¨¡å¼è¯†åˆ«                    | âœ… ä¼ä¸šçº§ |
| **âš¡ å‰å°/åå°æ¨¡å¼**  | åŒæ­¥æ‰§è¡Œä¸å¼‚æ­¥ä»»åŠ¡ç®¡ç†                           | âœ… ç¨³å®š   |
| **ğŸ¯ æ™ºèƒ½è¶…æ—¶æ§åˆ¶**   | 1-600ç§’èŒƒå›´ï¼Œè‡ªåŠ¨ç»ˆæ­¢è¶…æ—¶ä»»åŠ¡                    | âœ… å®Œå–„   |
| **ğŸ“Š å®æ—¶è¾“å‡ºç›‘æ§**   | ä¸´æ—¶æ–‡ä»¶å­˜å‚¨ï¼Œæ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤                     | âœ… é«˜æ•ˆ   |
| **ğŸ”§ å¤šShellæ”¯æŒ**    | PowerShell 7 â†’ PowerShell 5+ | âœ… æ™ºèƒ½   |

### ğŸ¢ ä¼ä¸šçº§ç‰¹æ€§

| ç‰¹æ€§                      | æè¿°                           | å®ç°æ–¹å¼          |
| :------------------------ | :----------------------------- | :---------------- |
| **ğŸ“ å®¡è®¡æ—¥å¿—**     | ç»“æ„åŒ–æ—¥å¿—è®°å½•ï¼Œå®‰å…¨äº‹ä»¶è¿½è¸ª   | stderrè¾“å‡º        |
| **ğŸš« å±é™©å‘½ä»¤è¿‡æ»¤** | 70+ç§å±é™©æ¨¡å¼ï¼Œå®æ—¶å¨èƒè¯†åˆ«    | Regex + Context   |
| **âš–ï¸ èµ„æºé™åˆ¶**   | è¶…æ—¶æ§åˆ¶ï¼ˆ1-600ç§’ï¼‰            | Context Timeout   |
| **ğŸ”„ ä»»åŠ¡ç®¡ç†**     | 50ä¸ªå¹¶å‘ä»»åŠ¡ï¼Œsync.RWMutexå®‰å…¨ | Goroutine + Mutex |
| **ğŸ—ï¸ æ²™ç®±éš”ç¦»**   | å·¥ä½œç›®å½•éš”ç¦»ï¼Œä¸´æ—¶æ–‡ä»¶ç®¡ç†     | Process Isolation |

---

## ğŸš€ å¿«é€Ÿå¼€å§‹

### ğŸ“‹ ç¯å¢ƒè¦æ±‚

| è¦æ±‚                 | ç‰ˆæœ¬              | éªŒè¯å‘½ä»¤                                 |
| :------------------- | :---------------- | :--------------------------------------- |
| **æ“ä½œç³»ç»Ÿ**   | Windows 10/11 x64 | `systeminfo \| findstr /B /C:"OS Name"` |
| **Goè¯­è¨€**     | Go 1.23.0+        | `go version`                           |
| **PowerShell** | PowerShell 7.0+   | `$PSVersionTable.PSVersion`            |
| **Git**        | Git 2.0+          | `git --version`                        |

### âš¡ 5æ­¥å¿«é€Ÿéƒ¨ç½²

#### 1ï¸âƒ£ å…‹éš†é¡¹ç›®

```powershell
git clone https://github.com/your-org/mcp-bash-tools.git
cd mcp-bash-tools
```

#### 2ï¸âƒ£ å®‰è£…ä¾èµ–

```powershell
go mod download
go mod verify
```

#### 3ï¸âƒ£ æ„å»ºé¡¹ç›®

```powershell
# å‘å¸ƒæ¨¡å¼æ„å»ºï¼ˆæ¨èï¼‰
.\build.ps1 -Release

# éªŒè¯æ„å»ºç»“æœ
Get-Item dist\bash-tools.exe
```

#### 4ï¸âƒ£ MCPå®¢æˆ·ç«¯é…ç½®

**Claude Desktop é…ç½®ç¤ºä¾‹**:

```json
{
  "mcpServers": {
    "bash-tools": {
      "command": "H:\\mcp\\bash-tools\\dist\\bash-tools.exe",
      "args": [],
      "env": {}
    }
  }
}
```

é…ç½®æ–‡ä»¶ä½ç½®: `%APPDATA%\Claude\claude_desktop_config.json`

#### 5ï¸âƒ£ éªŒè¯å®‰è£…

å¯åŠ¨æœåŠ¡å™¨åº”è¯¥çœ‹åˆ°ï¼š

```
ğŸš€ MCP Bash Tools Server starting...
ğŸ”§ æ£€æµ‹åˆ°çš„Shellç¯å¢ƒ:
1. pwsh: C:\Program Files\PowerShell\7\pwsh.exe âœ… (é¦–é€‰)
2. powershell: C:\Windows\System32\WindowsPowerShell\v1.0\powershell.exe âœ…
```

### ğŸ§ª å¿«é€Ÿæµ‹è¯•

```json
{
  "tool": "bash",
  "arguments": {
    "command": "Write-Output 'Hello, MCP Bash Tools!'; Get-Date",
    "timeout": 5000,
    "run_in_background": false
  }
}
```

**æœŸæœ›è¾“å‡º**:

```
Hello, MCP Bash Tools!
2024å¹´11æœˆ16æ—¥ 15:30:00
```

---

## ğŸ”Œ MCPå·¥å…·æ¥å£

### âš¡ Bashå·¥å…· - ä¸»è¦å‘½ä»¤æ‰§è¡Œ

**åŠŸèƒ½**: å®‰å…¨æ‰§è¡ŒPowerShellå‘½ä»¤

**è¶…æ—¶è¡Œä¸º**:
- **å‰å°æ‰§è¡Œ**: å¦‚æœå‘½ä»¤åœ¨timeoutæ—¶é—´å†…å®Œæˆï¼Œç«‹å³è¿”å›ç»“æœ
- **å‰å°è¶…æ—¶**: å¦‚æœå‘½ä»¤è¶…è¿‡timeoutæ—¶é—´ï¼Œ**è‡ªåŠ¨è½¬ä¸ºåå°ä»»åŠ¡**ï¼Œè¿”å›ä»»åŠ¡IDï¼Œå‘½ä»¤ç»§ç»­æ‰§è¡Œ
- **åå°æ‰§è¡Œ**: æ— è¶…æ—¶é™åˆ¶ï¼ŒæŒç»­è¿è¡Œç›´åˆ°å®Œæˆæˆ–è¢«æ‰‹åŠ¨ç»ˆæ­¢

**å‚æ•°**:

| å‚æ•°                  | ç±»å‹    | å¿…å¡« | é»˜è®¤å€¼ | æè¿°                        |
| :-------------------- | :------ | :--- | :----- | :-------------------------- |
| `command`           | string  | âœ…   | -      | è¦æ‰§è¡Œçš„å‘½ä»¤                |
| `timeout`           | number  | âœ…   | -      | è¶…æ—¶æ—¶é—´(æ¯«ç§’)ï¼Œ1000-600000 |
| `description`       | string  | âŒ   | -      | å‘½ä»¤æè¿°                    |
| `run_in_background` | boolean | âœ…   | false  | æ˜¯å¦åå°æ‰§è¡Œ                |

**è¿”å›**:

```json
{
  "output": "å‘½ä»¤è¾“å‡ºå†…å®¹",
  "exitCode": 0,
  "killed": false,
  "shellId": "bash_1701234567890123456"  // åå°æ¨¡å¼æˆ–å‰å°è¶…æ—¶æ—¶è¿”å›
}
```

**ä½¿ç”¨åœºæ™¯**:
- **å¿«é€Ÿå‘½ä»¤**: `run_in_background=false`, `timeout=5000` - 5ç§’å†…å®Œæˆçš„å‘½ä»¤
- **é•¿æ—¶é—´ä»»åŠ¡**: `run_in_background=true` - ç¼–è¯‘ã€éƒ¨ç½²ã€é•¿æ—¶é—´æµ‹è¯•
- **è‡ªåŠ¨è½¬åå°**: å‰å°å‘½ä»¤è¶…æ—¶åè‡ªåŠ¨è½¬åå°ï¼Œä¸ä¼šè¢«ç»ˆæ­¢

### ğŸ“Š BashOutputå·¥å…· - å®æ—¶è¾“å‡ºç›‘æ§

**åŠŸèƒ½**: è·å–åå°ä»»åŠ¡å®æ—¶è¾“å‡º

**å‚æ•°**:

| å‚æ•°        | ç±»å‹   | å¿…å¡« | æè¿°             |
| :---------- | :----- | :--- | :--------------- |
| `bash_id` | string | âœ…   | åå°ä»»åŠ¡ID       |
| `filter`  | string | âŒ   | æ­£åˆ™è¡¨è¾¾å¼è¿‡æ»¤å™¨ |

**è¿”å›**:

```json
{
  "output": "è¿‡æ»¤åçš„è¾“å‡ºå†…å®¹",
  "status": "running",  // running, completed, failed, killed
  "exitCode": null
}
```

### â›” KillShellå·¥å…· - ä»»åŠ¡ç»ˆæ­¢

**åŠŸèƒ½**: ç»ˆæ­¢åå°ä»»åŠ¡

**å‚æ•°**:

| å‚æ•°         | ç±»å‹   | å¿…å¡« | æè¿°           |
| :----------- | :----- | :--- | :------------- |
| `shell_id` | string | âœ…   | è¦ç»ˆæ­¢çš„ä»»åŠ¡ID |

**è¿”å›**:

```json
{
  "message": "ä»»åŠ¡å·²æˆåŠŸç»ˆæ­¢",
  "shell_id": "bash_1701234567890123456"
}
```

---

## ğŸ—ï¸ æ¶æ„è®¾è®¡

### ğŸ“ ä¸‰å±‚æ¶æ„æ¨¡å¼

```
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚          MCPæ¥å£å±‚ (cmd/server)        â”‚  â† 646è¡Œ
â”‚  â€¢ å·¥å…·æ³¨å†Œä¸JSON-RPCé€šä¿¡             â”‚
â”‚  â€¢ å‚æ•°éªŒè¯ä¸é”™è¯¯å¤„ç†                 â”‚
â”‚  â€¢ åå°ä»»åŠ¡ç®¡ç†                       â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚        ä¸šåŠ¡é€»è¾‘å±‚ (internal)          â”‚
â”‚  â€¢ executor/  - Shellæ‰§è¡Œå™¨ (3ä¸ª)     â”‚
â”‚  â€¢ security/  - å®‰å…¨éªŒè¯ (2ä¸ª)       â”‚
â”‚  â€¢ core/      - ç±»å‹å®šä¹‰              â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”¬â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                        â”‚
                        â–¼
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚      åŸºç¡€è®¾æ–½å±‚ (pkg)                 â”‚
â”‚  â€¢ logger/  - æ—¥å¿—ç³»ç»Ÿ                â”‚
â”‚  â€¢ utils/   - å·¥å…·å‡½æ•°                â”‚
â”‚  â€¢ config/  - é…ç½®ç®¡ç†                â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### ğŸ”§ æ ¸å¿ƒç»„ä»¶

| ç»„ä»¶                 | æ–‡ä»¶                                 | è¡Œæ•° | ä¸»è¦åŠŸèƒ½                         |
| :------------------- | :----------------------------------- | :--- | :------------------------------- |
| **MCPæœåŠ¡å™¨**  | `cmd/server/main.go`               | 646  | å·¥å…·æ³¨å†Œã€ä»»åŠ¡ç®¡ç†ã€JSON-RPCé€šä¿¡ |
| **Shellç®¡ç†**  | `internal/executor/shell.go`       | 185  | æ™ºèƒ½Shellæ£€æµ‹ã€ç¯å¢ƒä¼˜åŒ–          |
| **å®‰å…¨éªŒè¯**   | `internal/security/validator.go`   | 213  | 70+å±é™©æ¨¡å¼è¯†åˆ«ï¼ˆWindowsä¸“ç”¨ï¼‰   |
| **å‘½ä»¤æ‰§è¡Œ**   | `internal/executor/bash.go`        | 200  | PowerShellå‘½ä»¤æ‰§è¡Œã€è¶…æ—¶æ§åˆ¶     |

### ğŸ”„ å¹¶å‘å®‰å…¨æœºåˆ¶

- **è¯»å†™é”**: `sync.RWMutex` ä¿æŠ¤åå°ä»»åŠ¡å­˜å‚¨
- **ä¸´æ—¶æ–‡ä»¶**: åå°ä»»åŠ¡è¾“å‡ºå®æ—¶å†™å…¥ä¸´æ—¶æ–‡ä»¶
- **WaitGroup**: ç¡®ä¿æ‰€æœ‰goroutineå®Œæˆåæ‰å…³é—­æ–‡ä»¶
- **åŸå­æ“ä½œ**: ä»»åŠ¡çŠ¶æ€æ›´æ–°çš„åŸå­æ€§ä¿è¯

---

## ğŸ›¡ï¸ å®‰å…¨æœºåˆ¶

### ğŸ¯ å¤šå±‚å®‰å…¨é˜²æŠ¤ä½“ç³»

1. **ğŸ” è¾“å…¥éªŒè¯å±‚** - å‚æ•°ç±»å‹æ£€æŸ¥ã€é•¿åº¦éªŒè¯ã€ç‰¹æ®Šå­—ç¬¦è¿‡æ»¤
2. **ğŸ” å‘½ä»¤éªŒè¯å±‚** - 70+å±é™©æ¨¡å¼æ£€æµ‹ã€æ­£åˆ™è¡¨è¾¾å¼åŒ¹é…ã€ä¸Šä¸‹æ–‡åˆ†æ
3. **ğŸ“¦ æ‰§è¡Œéš”ç¦»å±‚** - å·¥ä½œç›®å½•é™åˆ¶ã€ä¸´æ—¶æ–‡ä»¶ç®¡ç†
4. **â±ï¸ è¶…æ—¶ä¿æŠ¤å±‚** - å¼ºåˆ¶è¶…æ—¶æ§åˆ¶ï¼ˆ1-600ç§’ï¼‰ï¼Œé˜²æ­¢æ— é™ç­‰å¾…
5. **ğŸ“Š ç›‘æ§å®¡è®¡å±‚** - å®æ—¶çŠ¶æ€ç›‘æ§ã€å‘½ä»¤æ‰§è¡Œè®°å½•

### âš ï¸ å±é™©å‘½ä»¤åˆ†ç±» (Windowsä¸“ç”¨)

| ç±»åˆ«               | ç¤ºä¾‹                                               | æ£€æµ‹æ–¹å¼   |
| :----------------- | :------------------------------------------------- | :--------- |
| **ç³»ç»Ÿç ´å** | `del /s`, `format C:`, `diskpart`            | æ­£åˆ™åŒ¹é…   |
| **ç³»ç»Ÿæ§åˆ¶** | `shutdown`, `reboot`, `Stop-Computer`        | å‘½ä»¤é»‘åå• |
| **æƒé™æå‡** | `takeown`, `net user /add`, `icacls`         | æƒé™æ£€æµ‹   |
| **ç½‘ç»œæ”»å‡»** | `net use`, `net session`, `bitsadmin`        | ç½‘ç»œç›‘æ§   |
| **æ¶æ„ä¸‹è½½** | `downloadstring`, `certutil -urlcache`       | æ¨¡å¼è¯†åˆ«   |

### âœ… å®‰å…¨å‘½ä»¤ç¤ºä¾‹

```powershell
# âœ… å®‰å…¨çš„ç³»ç»Ÿç›‘æ§
Get-Process | Select-Object Name, CPU
Get-PSDrive -PSProvider FileSystem
Test-Connection -ComputerName 8.8.8.8

# âœ… å®‰å…¨çš„æ–‡ä»¶æ“ä½œï¼ˆåªè¯»ï¼‰
Get-ChildItem -Path C:\Users -File
Get-Content -Path README.txt
Get-ChildItem -Recurse -Filter *.log
```

---

## ğŸ§ª æµ‹è¯•

### ğŸ“Š æµ‹è¯•è¦†ç›–ç‡

| æ¨¡å—                   | è¦†ç›–ç‡         | æµ‹è¯•é‡ç‚¹                     |
| :--------------------- | :------------- | :--------------------------- |
| **securityæ¨¡å—** | 100%           | å±é™©å‘½ä»¤æ£€æµ‹ã€è®¤è¯æˆæƒã€é™æµ |
| **executoræ¨¡å—** | 90%+           | å‘½ä»¤æ‰§è¡Œã€è¶…æ—¶æ§åˆ¶ã€å‰åå°   |
| **windowsæ¨¡å—**  | 85%+           | å¹³å°ä¼˜åŒ–ã€ç¼–ç è®¾ç½®           |
| **serverä¸»ç¨‹åº** | 80%+           | MCPå·¥å…·é›†æˆã€ä»»åŠ¡ç®¡ç†        |
| **æ•´ä½“è¦†ç›–ç‡**   | **85%+** | æ‰€æœ‰æ¨¡å—ç»¼åˆ                 |

### ğŸš€ å¿«é€Ÿæµ‹è¯•å‘½ä»¤

```powershell
# è¿è¡Œæ‰€æœ‰æµ‹è¯•
go test ./...

# è¯¦ç»†è¾“å‡º
go test -v ./...

# ç”Ÿæˆè¦†ç›–ç‡æŠ¥å‘Š
go test -coverprofile=coverage.out ./...
go tool cover -html=coverage.out -o coverage.html

# å¹¶å‘å®‰å…¨æµ‹è¯•
go test -race ./...

# è·³è¿‡å·²çŸ¥é—®é¢˜çš„æµ‹è¯•ï¼ˆå¿«é€Ÿæµ‹è¯•ï¼‰
go test ./... -skip="TestKillShellHandlerTestSuite" -skip="TestBashHandler_ConcurrentBackgroundTasks"

# æ€§èƒ½åŸºå‡†æµ‹è¯•
go test -bench=. -benchmem ./...

# è¿è¡Œç‰¹å®šæµ‹è¯•
go test -v -run TestSecurityTestSuite ./cmd/server
```

### ğŸ“‹ æµ‹è¯•æ–‡ä»¶ç»“æ„

| æµ‹è¯•æ–‡ä»¶                    | è¡Œæ•° | æµ‹è¯•å†…å®¹                        |
| :-------------------------- | :--- | :------------------------------ |
| `main_test.go`            | 291  | æ ¸å¿ƒåŠŸèƒ½æµ‹è¯•ï¼ŒMockShellExecutor |
| `security_test.go`        | 482  | 70+å±é™©å‘½ä»¤å®‰å…¨æµ‹è¯•             |
| `background_task_test.go` | 566  | ä»»åŠ¡ç®¡ç†ä¸å¹¶å‘å®‰å…¨æµ‹è¯•          |
| `bash_output_test.go`     | 399  | è¾“å‡ºè·å–ä¸æ­£åˆ™è¿‡æ»¤æµ‹è¯•          |
| `kill_shell_test.go`      | 435  | ä»»åŠ¡ç»ˆæ­¢ä¸èµ„æºæ¸…ç†æµ‹è¯•          |

---

## ğŸ‘¨â€ğŸ’» å¼€å‘æŒ‡å—

### ğŸ”¨ å¼€å‘ç¯å¢ƒè®¾ç½®

```powershell
# 1. æ£€æŸ¥Goç‰ˆæœ¬
go version  # éœ€è¦ Go 1.23.0+

# 2. å…‹éš†é¡¹ç›®
git clone https://github.com/your-org/mcp-bash-tools.git
cd mcp-bash-tools

# 3. å®‰è£…ä¾èµ–
go mod download
go mod verify

# 4. æ£€æŸ¥PowerShellæ‰§è¡Œç­–ç•¥
Get-ExecutionPolicy
# å¦‚æœæ˜¯ Restrictedï¼Œè®¾ç½®æ‰§è¡Œç­–ç•¥
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

### ğŸ“ ä»£ç è´¨é‡æ£€æŸ¥

```powershell
# æ ¼å¼åŒ–ä»£ç 
go fmt ./...

# é™æ€åˆ†æ
go vet ./...

# æ•´ç†ä¾èµ–
go mod tidy

# è¿è¡Œæµ‹è¯•
go test -race ./...

# æ„å»ºéªŒè¯
.\build.ps1 -Release
```

### ğŸ”„ å¼€å‘å·¥ä½œæµ

1. **åˆ›å»ºåŠŸèƒ½åˆ†æ”¯**

   ```powershell
   git checkout -b feature/new-feature
   ```
2. **ç¼–å†™ä»£ç å¹¶æµ‹è¯•**

   ```powershell
   # ç¼–å†™ä»£ç ...
   go fmt ./...
   go vet ./...
   go test ./...
   ```
3. **æ„å»ºéªŒè¯**

   ```powershell
   .\build.ps1 -Release
   ```
4. **æäº¤ä»£ç **

   ```powershell
   git add .
   git commit -m "feat: add new feature"
   git push origin feature/new-feature
   ```

---

## ğŸ”§ æ„å»ºå’Œéƒ¨ç½²

### ğŸ“¦ æ„å»ºé€‰é¡¹

```powershell
# è°ƒè¯•æ¨¡å¼æ„å»º
.\build.ps1

# å‘å¸ƒæ¨¡å¼æ„å»ºï¼ˆç”Ÿäº§ç¯å¢ƒæ¨èï¼‰
.\build.ps1 -Release

# è¯¦ç»†è¾“å‡ºæ„å»º
.\build.ps1 -Verbose

# æ¸…ç†æ„å»ºç¼“å­˜
.\build.ps1 -Clean

# ç»„åˆé€‰é¡¹
.\build.ps1 -Release -Verbose
```

### ğŸ¯ æ„å»ºé…ç½®

| é…ç½®               | è°ƒè¯•æ¨¡å¼ | å‘å¸ƒæ¨¡å¼                     |
| :----------------- | :------- | :--------------------------- |
| **ä¼˜åŒ–**     | åŸºç¡€æ„å»º | ä¼˜åŒ–ç¼–è¯‘ï¼ˆ-ldflags "-s -w"ï¼‰ |
| **è°ƒè¯•ä¿¡æ¯** | åŒ…å«     | ç§»é™¤                         |
| **æ–‡ä»¶å¤§å°** | è¾ƒå¤§     | æœ€å°åŒ–                       |
| **é€‚ç”¨åœºæ™¯** | å¼€å‘æµ‹è¯• | ç”Ÿäº§éƒ¨ç½²                     |

### ğŸš€ éƒ¨ç½²æŒ‡å—

1. **æ„å»ºå¯æ‰§è¡Œæ–‡ä»¶**

   ```powershell
   .\build.ps1 -Release
   ```
2. **éªŒè¯æ„å»ºç»“æœ**

   ```powershell
   Get-Item dist\bash-tools.exe | Select-Object Name, Length, CreationTime
   ```
3. **é…ç½®MCPå®¢æˆ·ç«¯**

   - æ›´æ–°é…ç½®æ–‡ä»¶ä¸­çš„å¯æ‰§è¡Œæ–‡ä»¶è·¯å¾„
   - é‡å¯MCPå®¢æˆ·ç«¯
4. **éªŒè¯éƒ¨ç½²**

   ```powershell
   .\dist\bash-tools.exe -h
   ```

---

## ğŸ“Š æ€§èƒ½æŒ‡æ ‡

| æŒ‡æ ‡                   | å½“å‰å€¼  | ç›®æ ‡å€¼  | çŠ¶æ€    |
| :--------------------- | :------ | :------ | :------ |
| **å‘½ä»¤å¯åŠ¨å»¶è¿Ÿ** | < 100ms | < 200ms | ğŸ† ä¼˜ç§€ |
| **å¹¶å‘ä»»åŠ¡æ•°**   | 50      | 100     | ğŸ“ˆ è‰¯å¥½ |
| **å†…å­˜ä½¿ç”¨**     | < 512MB | < 1GB   | ğŸ† ä¼˜ç§€ |
| **CPUä½¿ç”¨ç‡**    | < 80%   | < 90%   | ğŸ† ä¼˜ç§€ |
| **è¾“å‡ºå»¶è¿Ÿ**     | < 50ms  | < 100ms | ğŸ† ä¼˜ç§€ |
| **å®‰å…¨éªŒè¯æ—¶é—´** | < 20ms  | < 50ms  | ğŸ† ä¼˜ç§€ |

---

## ğŸ“š è¯¦ç»†æ–‡æ¡£

### ğŸ“– æ ¸å¿ƒæ–‡æ¡£
- [å¼€å‘æŒ‡å— (CLAUDE.md)](./CLAUDE.md) - å¼€å‘è€…å¿…è¯»ï¼ŒåŒ…å«æ¶æ„è®¾è®¡å’Œæœ€ä½³å®è·µ
- [æ”¹è¿›è®°å½• (IMPROVEMENTS.md)](./IMPROVEMENTS.md) - é¡¹ç›®æ”¹è¿›å†å²

### ğŸ” å®¡è®¡æŠ¥å‘Š
- [ç”Ÿäº§å°±ç»ªæ€§å®¡è®¡æ€»ç»“](./docs/FINAL_AUDIT_SUMMARY.md) - **æ€»ä½“è¯„åˆ† 96/100** â­â­â­â­â­
- [å®Œæ•´å®¡è®¡æŠ¥å‘Š](./docs/PRODUCTION_READINESS_AUDIT.md) - æ·±åº¦ä»£ç å®¡æŸ¥å’Œå®‰å…¨è¯„ä¼°
- [æµ‹è¯•ç»“æœæŠ¥å‘Š](./docs/TEST_RESULTS.md) - å‰å°è¶…æ—¶è½¬åå°åŠŸèƒ½éªŒè¯

### ğŸ“‹ æŠ€æœ¯å‚è€ƒ
- [MCPåè®®è§„èŒƒ](./docs/stdio-tools.md) - æ ‡å‡†I/Oå·¥å…·æ¥å£
- [è¶…æ—¶å®ç°æ–¹æ³•](./docs/timeout.md) - PowerShellè¶…æ—¶æœ€ä½³å®è·µ
- [ç±»å‹å®šä¹‰](./docs/todo.md) - TypeScriptæ¥å£å®šä¹‰

**æ›´å¤šæ–‡æ¡£**: æŸ¥çœ‹ [docs/INDEX.md](./docs/INDEX.md) è·å–å®Œæ•´æ–‡æ¡£åˆ—è¡¨

---

## ğŸ” æ•…éšœæ’é™¤

### å¸¸è§é—®é¢˜

#### âŒ æ„å»ºå¤±è´¥

```powershell
# æ£€æŸ¥Goç‰ˆæœ¬
go version

# æ¸…ç†æ¨¡å—ç¼“å­˜
go clean -modcache
go mod download

# é‡æ–°æ„å»º
go build ./...
```

#### âŒ PowerShellæ‰§è¡Œç­–ç•¥

```powershell
# æ£€æŸ¥æ‰§è¡Œç­–ç•¥
Get-ExecutionPolicy

# è®¾ç½®æ‰§è¡Œç­–ç•¥ï¼ˆå¦‚æœéœ€è¦ï¼‰
Set-ExecutionPolicy -ExecutionPolicy RemoteSigned -Scope CurrentUser
```

#### âŒ æµ‹è¯•å¤±è´¥

```powershell
# æ¸…ç†ä¸´æ—¶æ–‡ä»¶
Get-ChildItem -Path . -Recurse -Name "temp_*" -File | Remove-Item

# è·³è¿‡å·²çŸ¥é—®é¢˜çš„æµ‹è¯•
go test ./... -skip="TestKillShellHandlerTestSuite" -skip="TestBashHandler_ConcurrentBackgroundTasks"
```

#### âŒ åå°ä»»åŠ¡é—®é¢˜

- æ£€æŸ¥ä¸´æ—¶æ–‡ä»¶è·¯å¾„æƒé™
- éªŒè¯goroutineå†™å…¥é€»è¾‘
- ç¡®è®¤å¹¶å‘é”çš„ä½¿ç”¨

### ğŸ“ è·å–å¸®åŠ©

1. æŸ¥çœ‹ [CLAUDE.md](CLAUDE.md) è·å–è¯¦ç»†çš„å¼€å‘æŒ‡å—
2. æ£€æŸ¥ [Issues](https://github.com/your-org/mcp-bash-tools/issues) æŸ¥çœ‹å·²çŸ¥é—®é¢˜
3. åˆ›å»ºæ–°çš„IssueæŠ¥å‘Šé—®é¢˜

---

## ğŸ¤ è´¡çŒ®æŒ‡å—

### ğŸŒŸ è´¡çŒ®æ–¹å¼

- **ğŸ› æŠ¥å‘ŠBug** - å‘ç°é—®é¢˜æ—¶åˆ›å»ºIssue
- **ğŸ’¡ æå‡ºåŠŸèƒ½** - å»ºè®®æ–°åŠŸèƒ½æˆ–æ”¹è¿›
- **ğŸ“ å®Œå–„æ–‡æ¡£** - æ”¹è¿›æ–‡æ¡£å’Œç¤ºä¾‹
- **ğŸ’» æäº¤ä»£ç ** - ä¿®å¤Bugæˆ–æ·»åŠ åŠŸèƒ½

### ğŸ“ ä»£ç è§„èŒƒ

- éµå¾ª [Goå®˜æ–¹ä»£ç è§„èŒƒ](https://golang.org/doc/effective_go.html)
- ä½¿ç”¨ `go fmt` æ ¼å¼åŒ–ä»£ç 
- ä½¿ç”¨ `go vet` è¿›è¡Œé™æ€åˆ†æ
- æ–°åŠŸèƒ½å¿…é¡»åŒ…å«æµ‹è¯•
- æ›´æ–°ç›¸å…³æ–‡æ¡£

### ğŸ“‹ æäº¤è§„èŒƒ

ä½¿ç”¨ [Conventional Commits](https://www.conventionalcommits.org/) è§„èŒƒï¼š

```bash
# âœ¨ æ–°åŠŸèƒ½
feat: add new Bash tool support

# ğŸ› Bugä¿®å¤
fix: resolve timeout handling issue

# ğŸ“š æ–‡æ¡£æ›´æ–°
docs: update README with new examples

# âœ… æµ‹è¯•
test: add unit tests for security validator
```

### ğŸ” å®‰å…¨æŠ¥å‘Š

å¦‚æœå‘ç°å®‰å…¨æ¼æ´ï¼Œè¯·ä¸è¦å…¬å¼€æŠ¥å‘Šï¼

- ğŸ“§ é‚®ç®±: security@your-org.com
- ğŸ“‹ ä¸»é¢˜: `[SECURITY] MCP Bash Tools Vulnerability Report`

---

## ğŸ“„ è®¸å¯è¯

æœ¬é¡¹ç›®é‡‡ç”¨ [MITè®¸å¯è¯](LICENSE)ã€‚

<div align="center">

---

### â¤ï¸ æ„Ÿè°¢ä½¿ç”¨ MCP Bash Toolsï¼

**è®©PowerShellå‘½ä»¤æ‰§è¡Œæ›´å®‰å…¨ã€æ›´é«˜æ•ˆï¼**

Made with â¤ï¸ by the MCP Bash Tools Team

[â¬† å›åˆ°é¡¶éƒ¨](#-mcp-bash-tools)

</div>
